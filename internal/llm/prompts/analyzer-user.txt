Inputs:
- instructions_text: |
%s
- history_text: |
%s
- strava_recent: %s
- upcoming_cardio_text: %q
- recovery_signals: {"sleep_score": %s, "body_battery": %s}
- equipment_inventory: %s
- meta: {"date": %q, "location": %q, "units": %q, "duration_minutes": %d}

Constraints:
- Two-week anti-repeat logic unless last workout ≥7 days ago (then reset).
- Only use available equipment.
- Rep ranges for compounds typically 6–10 or 6–8; accessories 10–20.
- RIR default 1–3 unless fatigue_policy increases it.

Schema (for validation):
%s

Now produce ONLY the JSON object that conforms to the schema.

